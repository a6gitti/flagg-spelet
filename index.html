<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Guess the European Flag</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#f5f5f5;margin:0;padding:0;display:flex;justify-content:cebody{font-family:Arial,Helvetica,sans-serif;background:#f5f5f5;margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;}
  #game{background:white;border-radius:8px;padding:20px 30px;box-shadow:0 4px 12px
rgba(0,0,0,.15);text-align:center;}
  #flag{max-width:300px;margin:20px auto;display:block;}
  .options{margin-top:10px;text-align:left;}
  .options label{display:block;margin-bottom:8px;}
  #feedback{font-size:1.3rem;margin-top:15px;}
  .correct{color:#2e7d32;}
  .wrong{color:#c62828;}
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  button{margin-top:15px;padding:8px
16px;background:#1976d2;color:white;border:none;border-radius:4px;cursor:pointer;}
  button:hover{background:#1565c0;}
</style>
</head>
<body>
<div id="game">
  <h2>Gissa flaggan</h2>
  <img id="flag" src="" alt="European Flag">
  <form id="quizForm" class="options"></form>
  <div id="feedback"></div>
  <button id="nextBtn" style="display:none;">Nästa flagga</button>
</div>

<!-- Confetti library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
/* ---------- Data: 10 European flags (country, image URL) ---------- */
const flags = [
  { country: 'Frankrike', img: 'https://flagcdn.com/w320/fr.png' },
  { country: 'Tyskland', img: 'https://flagcdn.com/w320/de.png' },
  { country: 'Italien', img: 'https://flagcdn.com/w320/it.png' },
  { country: 'Spanien', img: 'https://flagcdn.com/w320/es.png' },
  { country: 'England', img: 'https://flagcdn.com/w320/gb.png' },
  { country: 'Polen', img: 'https://flagcdn.com/w320/pl.png' },
  { country: 'Sverige', img: 'https://flagcdn.com/w320/se.png' },
  { country: 'Portugal', img: 'https://flagcdn.com/w320/pt.png' },
  { country: 'Grekland', img: 'https://flagcdn.com/w320/gr.png' },
  { country: 'Norge', img: 'https://flagcdn.com/w320/no.png' },
  { country: 'Finland', img: 'https://flagcdn.com/w320/fin.png' },
  { country: 'Ryssland', img: 'https://flagcdn.com/w320/ru.png' },
  { country: 'Österrike', img: 'https://flagcdn.com/w320/at.png' },
  { country: 'Serbien', img: 'https://flagcdn.com/w320/rs.png' },
  { country: 'Ukraina', img: 'https://flagcdn.com/w320/ua.png' },
  { country: 'Danmark', img: 'https://flagcdn.com/w320/dk.png' }
];

/* ---------- Game State ---------- */
let currentFlag = null;      // { country, img }
let options = [];            // array of country names (3 items)
let correctIdx = 0;          // index of correct answer in `options`

/* ---------- DOM Elements ---------- */
const flagEl = document.getElementById('flag');
const formEl = document.getElementById('quizForm');
const feedbackEl = document.getElementById('feedback');
const nextBtn   = document.getElementById('nextBtn');

/* ---------- Helper Functions ---------- */
function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function pickRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

/* ---------- Load a New Question ---------- */
function loadQuestion() {
  // 1. Pick the correct flag
  currentFlag = pickRandom(flags);

  // 2. Pick 2 other distinct flags
  const otherFlags = flags.filter(f => f !== currentFlag);
  const wrongFlags = shuffle(otherFlags).slice(0, 2);

  // 3. Build options array (shuffled)
  options = shuffle([currentFlag.country, ...wrongFlags.map(f => f.country)]);
  correctIdx = options.indexOf(currentFlag.country);

  // 4. Update DOM
  flagEl.src = currentFlag.img;
  formEl.innerHTML = ''; // clear previous options

  options.forEach((opt, i) => {
    const id = 'opt' + i;
    const div = document.createElement('label');
    div.innerHTML = `<input type="checkbox" name="answer" id="${id}" value="${i}"> ${opt}`;
    formEl.appendChild(div);
  });

  // Reset feedback
  feedbackEl.textContent = '';
  feedbackEl.className = '';
  nextBtn.style.display = 'none';

  // Ensure only one checkbox can be selected
  formEl.querySelectorAll('input[type=checkbox]').forEach(cb => {
    cb.addEventListener('change', () => {
      if (cb.checked) {
        formEl.querySelectorAll('input[type=checkbox]').forEach(other => {
          if (other !== cb) other.checked = false;
        });
      }
    });
  });
}

/* ---------- Handle Answer ---------- */
function checkAnswer() {
  const selected = formEl.querySelector('input[type=checkbox]:checked');
  if (!selected) return; // nothing selected

  const chosenIdx = parseInt(selected.value, 10);
  if (chosenIdx === correctIdx) {
    feedbackEl.textContent = 'Korrekt!';
    feedbackEl.className = 'correct';
    confetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 }
    });
  } else {
    feedbackEl.textContent = 'Wrong!';
    feedbackEl.className = 'wrong';
  }

  // Disable further changes until next flag
  formEl.querySelectorAll('input').forEach(i => i.disabled = true);

  // Show "Next" button after 2 seconds
  setTimeout(() => {
    nextBtn.style.display = 'inline-block';
  }, 2000);
}

/* ---------- Event Listeners ---------- */
formEl.addEventListener('change', checkAnswer);
nextBtn.addEventListener('click', () => {
  // Re‑enable inputs
  formEl.querySelectorAll('input').forEach(i => i.disabled = false);
  loadQuestion();
});

/* ---------- Init ---------- */
loadQuestion();
</script>
</body>
</html>
