<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Guess the European Flag</title>
<style>
  /* Base Styles */
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-size: 1.5rem; /* Slightly larger base font */
  }

  #game {
    background: white;
    border-radius: 8px;
    padding: 30px 40px;
    box-shadow: 0 4px 12px rgba(0,0,0,.15);
    text-align: center;
    width: 100%;
    max-width: 400px;
  }

  h2 {
    font-size: 1.8rem;
    margin-bottom: 20px;
  }

  #flag {
    max-width: 100%;
    height: auto;
    border: 1px solid #ddd;
    margin: 20px auto;
    display: block;
  }

  /* Options Styling */
  .options {
    margin-top: 20px;
    text-align: left;
  }

  .options label {
    display: block;
    margin-bottom: 12px;
    font-size: 1.4rem; /* Larger font for the choices */
    cursor: pointer;
    padding: 8px;
    border-radius: 4px;
    transition: background 0.2s;
  }

  .options label:hover {
    background: #f0f0f0;
  }

  .options input {
    transform: scale(1.4); /* Makes the checkbox itself bigger */
    margin-right: 10px;
  }

  /* Feedback Styling */
  #feedback {
    font-size: 2rem; /* Big, bold feedback */
    font-weight: bold;
    margin-top: 20px;
    min-height: 2.5rem;
  }

  .correct { color: #2e7d32; }
  .wrong { color: #c62828; }

  button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 1.1rem;
    background: #1976d2;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background: #1565c0;
  }
</style>
</head>
<body>

<div id="game">
  <h2>Gissa flaggan</h2>
  <img id="flag" src="" alt="European Flag">
  <form id="quizForm" class="options"></form>
  <div id="feedback"></div>
  <button id="nextBtn" style="display:none;">Nästa flagga</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
/* ---------- Data: European flags ---------- */
const flags = [
  { country: 'Frankrike', img: 'https://flagcdn.com/w320/fr.png' },
  { country: 'Tyskland', img: 'https://flagcdn.com/w320/de.png' },
  { country: 'Italien', img: 'https://flagcdn.com/w320/it.png' },
  { country: 'Spanien', img: 'https://flagcdn.com/w320/es.png' },
  { country: 'England', img: 'https://flagcdn.com/w320/gb.png' },
  { country: 'Polen', img: 'https://flagcdn.com/w320/pl.png' },
  { country: 'Sverige', img: 'https://flagcdn.com/w320/se.png' },
  { country: 'Portugal', img: 'https://flagcdn.com/w320/pt.png' },
  { country: 'Grekland', img: 'https://flagcdn.com/w320/gr.png' },
  { country: 'Norge', img: 'https://flagcdn.com/w320/no.png' },
  { country: 'Finland', img: 'https://flagcdn.com/w320/fin.png' },
  { country: 'Ryssland', img: 'https://flagcdn.com/w320/ru.png' },
  { country: 'Österrike', img: 'https://flagcdn.com/w320/at.png' },
  { country: 'Serbien', img: 'https://flagcdn.com/w320/rs.png' },
  { country: 'Ukraina', img: 'https://flagcdn.com/w320/ua.png' },
  { country: 'Danmark', img: 'https://flagcdn.com/w320/dk.png' }
];

let currentFlag = null;
let options = [];
let correctIdx = 0;

const flagEl = document.getElementById('flag');
const formEl = document.getElementById('quizForm');
const feedbackEl = document.getElementById('feedback');
const nextBtn = document.getElementById('nextBtn');

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function pickRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function loadQuestion() {
  currentFlag = pickRandom(flags);
  const otherFlags = flags.filter(f => f !== currentFlag);
  const wrongFlags = shuffle(otherFlags).slice(0, 2);

  options = shuffle([currentFlag.country, ...wrongFlags.map(f => f.country)]);
  correctIdx = options.indexOf(currentFlag.country);

  flagEl.src = currentFlag.img;
  formEl.innerHTML = ''; 

  options.forEach((opt, i) => {
    const id = 'opt' + i;
    const label = document.createElement('label');
    label.innerHTML = `<input type="checkbox" name="answer" id="${id}" value="${i}"> ${opt}`;
    formEl.appendChild(label);
  });

  feedbackEl.textContent = '';
  feedbackEl.className = '';
  nextBtn.style.display = 'none';

  formEl.querySelectorAll('input[type=checkbox]').forEach(cb => {
    cb.addEventListener('change', () => {
      if (cb.checked) {
        formEl.querySelectorAll('input[type=checkbox]').forEach(other => {
          if (other !== cb) other.checked = false;
        });
      }
    });
  });
}

function checkAnswer() {
  const selected = formEl.querySelector('input[type=checkbox]:checked');
  if (!selected) return;

  const chosenIdx = parseInt(selected.value, 10);
  if (chosenIdx === correctIdx) {
    feedbackEl.textContent = 'Korrekt!';
    feedbackEl.className = 'correct';
    confetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 }
    });
  } else {
    feedbackEl.textContent = 'Fel!';
    feedbackEl.className = 'wrong';
  }

  formEl.querySelectorAll('input').forEach(i => i.disabled = true);

  setTimeout(() => {
    nextBtn.style.display = 'inline-block';
  }, 1000);
}

formEl.addEventListener('change', checkAnswer);
nextBtn.addEventListener('click', () => {
  formEl.querySelectorAll('input').forEach(i => i.disabled = false);
  loadQuestion();
});

loadQuestion();
</script>
</body>
</html>
